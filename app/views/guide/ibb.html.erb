<div class="container mb-3">
  <div class="row">
    <div class="col-2 border">
      <% @categories.each do |category| %>
        <p><%= link_to category.name, "/ibb/#{category.id}" %></p>
      <% end %>
    </div>

    <div class="col-10 border">
      <% unless @board %>
        <h1 class="text-center mt-4">ようこそIBBへ</h1>
      <% else %>
        <h2>
          <%= @category.name %>@掲示板
        </h2>

        <div class="card mb-4">
          <div class="card-body">
            <p>
              <% @boards.each_with_index do |board, i| %>
                <% if i < 10%>
                  <% str = (i+1).to_s + ": " + board.name + "(" + board.contents.count.to_s + ')' %>
                  <%= link_to str, board_path(board.id) %>
                <% end %>
              <% end %>
            </p>
          </div>
          <div class="card-footer">
            <%= link_to "スレッド一覧はこちら", "/", class: "d-block text-right" %>
          </div>
        </div>

        <% @boards.first(5).each do |board| %>
          <div class="card mb-4">
            <div class="card-header">
              <h4><%= board.name %></h4>
            </div>

            <div class="card-body">
              <% board.contents.first(5).each_with_index do |content, i| %>
                <p>
                  <% str = (i + 1).to_s %>
                  <% str << ' 名前 : ' + content.user_name + ' : ' %>
                  <% str << content.created_at.strftime("%Y-%m-%d %H:%M:%S") %>
                  <% id = content.created_at.strftime("%Y%m%d") + content.ipv4 %>
                  <% str << ' ID: ' + Digest::MD5.hexdigest(id) %>
                  <%= str %><br>
                  <%= content.post %>
                </p>
              <% end %>

              <form method="POST" action="">
                <input type="hidden" name="" value="">
                <input type="submit" value="書き込む" name="submit">
                <label>名前：<input name="user_name"></label>
                <label>E-mail：<input name="email"></label><br>
                <textarea rows="5" cols="64" wrap="OFF" name="post"></textarea>
              </form>

              <div class="btn-group btn-group-sm" role="group">
                <button type="button" class="btn btn-secondary">スマホ用</button>
                <button type="button" class="btn btn-secondary">全部読む</button>
                <button type="button" class="btn btn-secondary">最新50</button>
                <button type="button" class="btn btn-secondary">1-100</button>
                <button type="button" class="btn btn-secondary">板のトップ</button>
                <button type="button" class="btn btn-secondary">リロード</button>
              </div>
            </div>
          </div>
        <% end %>

        <div class="card">
          <div class="card-body">
            <%= render 'board_form', content: @board %>
          </div>
        </div>

      <% end %>
    </div>
  </div>
</div>
